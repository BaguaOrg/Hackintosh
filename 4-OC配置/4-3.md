# 3. DeviceProperties

设备配置通过专用缓冲区提供给 macOS，用于设置 PCI 设备属性，如英特尔缓冲帧补丁，声卡 Layout ID 等。当然声卡的 ID 也可以直接通过启动项添加 `alcid=xx` 这种形式来添加也是 OK 的。

## 寻找设备地址 

不同的设备的硬件地址是不一样的，可以使用 Hackintool 查看具体的地址信息：

![](https://image.3001.net/images/20210920/16321210545547.png) 

或者直接使用 OCC  也是可以识别添加设备地址信息的：

![](https://image.3001.net/images/20210920/16321212008046.png) 

添加好的效果如下：

![](https://image.3001.net/images/20210920/16321209929227.png) 

当然设备属性这里还是有一些缺失的，这就需要我们来手动来补充了。

## Intel 桌面平台

### Yonah、Conroe 、Penryn、Lynnfield、Clarkdale

这些平台无需特殊设置，只需要添加完善声卡信息即可，当然也可以直接通过启动项添加，前期调试的过程中，国光我建议大家是通过启动项添加  `alcid=xx` 这种形式。

### Sandy Bridge

![](https://image.3001.net/images/20210920/16321220813709.png) 

-  **PciRoot(0x0)/Pci(0x1b,0x0)**

  - layout-id
  - 用 AppleALC 音频注入，完整的 ALC ID 可以参考：[AppleALC 支持设备列表](https://github.com/acidanthera/AppleALC/wiki/Supported-codecs)

- **PciRoot(0x0)/Pci(0x2,0x0)**
  - 配置 iGPU 核显
  - AAPL,snb-platform-id 
    - macOS 用来确定 iGPU 驱动程序如何与我们的系统交互的
  - device-id
    - 解决一些驱动异常问题，提高兼容度
  

| AAPL,snb-platform-id | 说明解释                                                     |
| :------------------- | :----------------------------------------------------------- |
| **`10000300`**       | 当桌面 iGPU 用于驱动显示器时使用                             |
| **`00000500`**       | 当桌面 iGPU 仅用于计算任务而不驱动显示器时使用（有独显的时候可以考虑） |

| device-id      | 说明解释                                                     |
| :------------- | :----------------------------------------------------------- |
| **`26010000`** | 当桌面 iGPU 用于驱动显示器时使用                             |
| **`02010000`** | 当桌面 iGPU 仅用于计算任务而不驱动显示器时使用（有独显的时候可以考虑） |

下面是桌面 HD 3000 核显的最终配置的示例：

![](https://image.3001.net/images/20210920/16321227735696.png)  

### Ivy Bridge

![](https://image.3001.net/images/20210920/16321230409173.png) 

 

-  **PciRoot(0x0)/Pci(0x1b,0x0)**

   - layout-id
   - 用 AppleALC 音频注入，完整的 ALC ID 可以参考：[AppleALC 支持设备列表](https://github.com/acidanthera/AppleALC/wiki/Supported-codecs)
-  **PciRoot(0x0)/Pci(0x2,0x0)**
   - 配置 iGPU 核显
   - AAPL,ig-platform-id
     - macOS 用来确定 iGPU 驱动程序如何与我们的系统交互的
   - device-id
     - 解决一些驱动异常问题，提供兼容度

| AAPL,ig-platform-id | 说明解释                                                     |
| :------------------ | :----------------------------------------------------------- |
| **`0A006601`**      | 当桌面 iGPU 用于驱动显示器时使用                             |
| **`07006201`**      | 当桌面 iGPU 仅用于计算任务而不驱动显示器时使用（有独显的时候可以考虑） |



台式机 HD 4000 核显的 AAPL,ig-platform-id 为 `0A006601`

- **PciRoot(0x0)/Pci(0x16,0x0)**
  - Ivy Bridge CPU 与 6 系列主板（即 H61、B65、Q65、P67、H67、Q67、Z68）配合使用需要
  - 欺骗 IMEI 设备以获得支持
  - 无论是否使用 SSDT-IMEI，此属性仍然是必需的

| Key       | Type | Value      |
| :-------- | :--- | :--------- |
| device-id | Data | `3A1E0000` |

> 如果是 7 系列主板（即 B75、Q75、Z75、H77、Q77、Z77），则不需要此项

###  Haswell、Broadwell

![](https://image.3001.net/images/20210920/16321233761618.png) 

-  **PciRoot(0x0)/Pci(0x1b,0x0)**
   - layout-id
   - 用 AppleALC 音频注入，完整的 ALC ID 可以参考：[AppleALC 支持设备列表](https://github.com/acidanthera/AppleALC/wiki/Supported-codecs)
-  **PciRoot(0x0)/Pci(0x2,0x0)**
   - 配置 iGPU 核显
   - AAPL,ig-platform-id
     - macOS 用来确定 iGPU 驱动程序如何与我们的系统交互的
   - device-id
     - 解决一些驱动异常问题，提高兼容度
   - framebuffer-patch-enable
     - 启用通过 WhateverGreen.kext 进行修补
     - 如果是独显输出的话可以不需要这个属性
     - BIOS 可以设置 `DVMT Pre-Allocated: 64MB` 也不需要
   - framebuffer-stolenmem
     - 设置核显最小被盗内存
     - 如果是独显输出的话可以不需要这个属性
     - BIOS 可以设置 `DVMT Pre-Allocated: 64MB` 的话也不需要
   - framebuffer-fbmem
     - 设置缓冲帧内存大小
     - 如果是独显输出的话可以不需要这个属性
     - BIOS 可以设置 `DVMT Pre-Allocated: 64MB` 的话也不需要

| AAPL,ig-platform-id | 解释说明                                                   |
| :------------------ | :--------------------------------------------------------- |
| **`0300220D`**      | 当 Desktop Haswell iGPU 用于驱动显示器时使用               |
| **`04001204`**      | 当 Desktop Haswell iGPU 仅用于计算任务而不驱动显示器时使用 |
| **`07002216`**      | 桌面 Broadwell iGPU 时使用                                 |

| device-id  | 说明解释              |
| :--------- | :-------------------- |
| `12040000` | HD 4600 核显的设备 ID |

下面是 HD 4400 核显的最终配置的示例：

| Key                      | Type | Value      |
| :----------------------- | :--- | :--------- |
| AAPL,ig-platform-id      | Data | `0300220D` |
| framebuffer-patch-enable | Data | `01000000` |
| framebuffer-stolenmem    | Data | `00003001` |
| framebuffer-fbmem        | Data | `00009000` |
| device-id                | Data | `12040000` |

下面是 lris Pro 6200 核显的最终配置示例：

| Key                      | Type | Value      |
| :----------------------- | :--- | :--------- |
| AAPL,ig-platform-id      | Data | `07002216` |
| framebuffer-patch-enable | Data | `01000000` |
| framebuffer-stolenmem    | Data | `00003001` |
| framebuffer-fbmem        | Data | `00009000` |

### Skylake

![](https://image.3001.net/images/20210920/16321241655779.png) 

 

-  **PciRoot(0x0)/Pci(0x1b,0x0)**
   - layout-id
   - 用 AppleALC 音频注入，完整的 ALC ID 可以参考：[AppleALC 支持设备列表](https://github.com/acidanthera/AppleALC/wiki/Supported-codecs)
-  **PciRoot(0x0)/Pci(0x2,0x0)**
   - 配置 iGPU 核显
   - AAPL,ig-platform-id
     - macOS 用来确定 iGPU 驱动程序如何与我们的系统交互的
   - device-id
     - 解决一些驱动异常问题，提高兼容度
   - framebuffer-patch-enable
     - 启用通过 WhateverGreen.kext 进行修补
     - 如果是独显输出的话可以不需要这个属性
     - BIOS 可以设置 `DVMT Pre-Allocated: 64MB` 也不需要
   - framebuffer-stolenmem
     - 设置核显最小被盗内存
     - 如果是独显输出的话可以不需要这个属性
     - BIOS 可以设置 `DVMT Pre-Allocated: 64MB` 的话也不需要
   - framebuffer-fbmem
     - 设置缓冲帧内存大小
     - 如果是独显输出的话可以不需要这个属性
     - BIOS 可以设置 `DVMT Pre-Allocated: 64MB` 的话也不需要

| AAPL,ig-platform-id | 解释说明                                       |
| :------------------ | :--------------------------------------------- |
| **`00001219`**      | 当桌面 iGPU 用于驱动显示器时使用               |
| **`01001219`**      | 当桌面 iGPU 仅用于计算任务而不驱动显示器时使用 |

HD P530 核显用户需要注意的是，您的 iGPU 核显不受本机支持，因此您需要添加以下属性：

| Key       | Type | Value      |
| :-------- | :--- | :--------- |
| device-id | Data | `1B190000` |

下面是 HD P530  核显的最终配置示例：

| Key                      | Type | Value      |
| :----------------------- | :--- | :--------- |
| AAPL,ig-platform-id      | Data | `00001219` |
| framebuffer-patch-enable | Data | `01000000` |
| framebuffer-stolenmem    | Data | `00003001` |
| framebuffer-fbmem        | Data | `00009000` |
| device-id                | Data | `1B190000` |

### Kaby Lake

![](https://image.3001.net/images/20210920/16321244411668.png) 

 

-  **PciRoot(0x0)/Pci(0x1b,0x0)**
   - layout-id
   - 用 AppleALC 音频注入，完整的 ALC ID 可以参考：[AppleALC 支持设备列表](https://github.com/acidanthera/AppleALC/wiki/Supported-codecs)
-  **PciRoot(0x0)/Pci(0x2,0x0)**
   - 配置 iGPU 核显
   - AAPL,ig-platform-id
     - macOS 用来确定 iGPU 驱动程序如何与我们的系统交互的
   - device-id
     - 解决一些驱动异常问题，提高兼容度
   - framebuffer-patch-enable
     - 启用通过 WhateverGreen.kext 进行修补
     - 如果是独显输出的话可以不需要这个属性
     - BIOS 可以设置 `DVMT Pre-Allocated: 64MB` 也不需要
   - framebuffer-stolenmem
     - 设置核显最小被盗内存
     - 如果是独显输出的话可以不需要这个属性
     - BIOS 可以设置 `DVMT Pre-Allocated: 64MB` 的话也不需要
   - framebuffer-fbmem
     - 设置缓冲帧内存大小
     - 如果是独显输出的话可以不需要这个属性
     - BIOS 可以设置 `DVMT Pre-Allocated: 64MB` 的话也不需要



下面是 HD630  核显的最终配置示例：

| Key                      | Type | Value      |
| :----------------------- | :--- | :--------- |
| AAPL,ig-platform-id      | Data | `00001259` |
| framebuffer-patch-enable | Data | `01000000` |
| framebuffer-stolenmem    | Data | `00003001` |

### Coffee Lake



-  **PciRoot(0x0)/Pci(0x1b,0x0)**
   - layout-id
   - 用 AppleALC 音频注入，完整的 ALC ID 可以参考：[AppleALC 支持设备列表](https://github.com/acidanthera/AppleALC/wiki/Supported-codecs)
-  **PciRoot(0x0)/Pci(0x2,0x0)**
   - 配置 iGPU 核显
   - AAPL,ig-platform-id
     - macOS 用来确定 iGPU 驱动程序如何与我们的系统交互的
   - device-id
     - 解决一些驱动异常问题，提高兼容度
   - framebuffer-patch-enable
     - 启用通过 WhateverGreen.kext 进行修补
     - 如果是独显输出的话可以不需要这个属性
     - BIOS 可以设置 `DVMT Pre-Allocated: 64MB` 也不需要
   - framebuffer-stolenmem
     - 设置核显最小被盗内存
     - 如果是独显输出的话可以不需要这个属性
     - BIOS 可以设置 `DVMT Pre-Allocated: 64MB` 的话也不需要
   - framebuffer-fbmem
     - 设置缓冲帧内存大小
     - 如果是独显输出的话可以不需要这个属性
     - BIOS 可以设置 `DVMT Pre-Allocated: 64MB` 的话也不需要







## Intel 高端桌面平台

## Intel 笔记本平台

## AMD 桌面平台

